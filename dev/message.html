<!DOCTYPE html>
<html lang="zh_Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    @@include('./layout/head.html',{
        "title": "浪愛回家 ｜ 我的信箱"
    })
    <link rel="stylesheet" href="./css/message.css">
</head>
<body>
    @@include('./layout/header_mem.html')
    <section>
        <div id="blackListAlert" class="md-modal md-effect-1">
            <form method="POST" class="md-content">
                <p>設定為黑名單後即無法傳送私信給此用戶，並無法收到此用戶傳來的私信，是否確認將此用戶設為黑名單？</p>
                <button class="yes titleFont">確認</button>
                <button class="cancel titleFont md-close">取消</button>
            </form>
        </div>
        <div id="deleteAlert">
            <form method="POST">
                <p>刪除私信後即無法再顯示及回覆該筆私信，是否確認刪除此筆私信？</p>
                <button class="yes titleFont">確認</button>
                <button class="cancel titleFont">取消</button>
            </form>
        </div>
        <aside class="col-xl-4 col-lg-4 col-md-5 col-sm-12 col-ss-12">
            <div class="myMessage">
                <h2>我的信箱</h2>
                <span class="titleFont">2 則未讀</span>
            </div>
            <ul>
                <li class="unRead">
                    <div class="img">
                        <img src="img/message_mem_1.jpg">
                    </div>
                    <div class="text">
                        <div class="title">
                            <h4>May</h4>
                            <span class="smalltext">2020.02.24　21:09</span>
                        </div>
                        <p>Hello想請問你文章裡面分享的飼料是哪個牌子呢～～～？我家貓咪最近吃飯吃不好，想幫他換換口味</p>
                    </div>
                </li>
                <li class="on">
                    <div class="img">
                        <img src="img/message_mem_1.jpg">
                    </div>
                    <div class="text">
                        <div class="title">
                            <h4>May</h4>
                            <span class="smalltext">2020.02.24　21:09</span>
                        </div>
                        <p>Hello想請問你文章裡面分享的飼料是哪個牌子呢～～～？我家貓咪最近吃飯吃不好，想幫他換換口味</p>
                    </div>
                </li>
                <li>
                    <div class="img">
                        <img src="img/message_mem_1.jpg">
                    </div>
                    <div class="text">
                        <div class="title">
                            <h4>May</h4>
                            <span class="smalltext">2020.02.24　21:09</span>
                        </div>
                        <p>Hello想請問你文章裡面分享的飼料是哪個牌子呢～～～？我家貓咪最近吃飯吃不好，想幫他換換口味</p>
                    </div>
                </li>
                
            </ul>
        </aside>
        <main class="col-xl-8 col-lg-8 col-md-7 col-sm-12 col-ss-12">
            <ul>
                <button class="back titleFont"></button>
                <div id="setBlackZone">
                    <button id="setting"></button>
                    <span id="setBlack">設為黑名單</span>
                </div>
                <li class="otherSide">
                    <div class="img">
                        <img src="img/message_mem_1.jpg">
                    </div>
                    <h4>May</h4>
                    <div class="text">
                        <h4>May</h4>
                        <p>Hello想請問你文章裡面分享的飼料是哪個牌子呢～～～？我家貓咪最近吃飯吃不好，想幫他換換口味</p>
                        <span class="smalltext">2020.02.24　21:09</span>
                        <button class="closeBtn"></button>
                    </div>
                </li>
                <li class="self">
                    <div class="text">
                        <p>Hello想請問你文章裡面分享的飼料是哪個牌子呢～～～？我家貓咪最近吃飯吃不好，想幫他換換口味</p>
                        <span class="smalltext">2020.02.24　21:09</span>
                        <button class="closeBtn"></button>
                    </div>
                </li>
                
            </ul>
            <form action="./php/message.php" method="POST" class="edit">
                <label for="upload">
                    <input type="file" id="upload" accept="image/*">
                </label>
                <input type="text" id="inputText" placeholder="請輸入私信內容">
                <input type="submit">
            </div>
        </main>
    </section>
    <script src="./js/heightWithoutHeader.js"></script>
    <script src="./js/hamburger.js"></script>
    <script src="./js/memberHeader.js"></script>
    <script src="./js/signInOut_mem.js"></script>
    <script>
        sectionHeight();
        window.addEventListener('resize',sectionHeight);

        let setBlackZone= document.getElementById("setBlackZone");
        let setting= document.getElementById("setting");
        let setBlack= document.getElementById("setBlack");
        let blackListAlert= document.getElementById("blackListAlert");
        let closeBtns= document.querySelectorAll('button.closeBtn');
        let deleteAlert= document.getElementById("deleteAlert");
        
        setBlackZone.style.top= document.querySelector('nav').offsetHeight + 10 + "px";
        window.addEventListener('resize',function(){
            setBlackZone.style.top= document.querySelector('nav').offsetHeight + 10 + "px";
        });
        setting.addEventListener("click",function(){
            setBlack.classList.toggle("on");
        });
        setBlack.addEventListener("click",function(){
            setBlack.classList.toggle("on");
            blackListAlert.style.display="block";
        });
        blackListAlert.querySelector('button.cancel').onclick=function(e){
            e.preventDefault();
            blackListAlert.style.display="none";
        };
        for(let i=0; i<closeBtns.length; i++){
            closeBtns[i].onclick=function(){
                deleteAlert.style.display="block";
            }
        }
        deleteAlert.querySelector('button.cancel').onclick=function(e){
            e.preventDefault();
            deleteAlert.style.display="none";
        }

        let chatRooms= document.querySelectorAll('aside ul li');
        let aside= document.querySelector('aside');
        let main= document.querySelector('main');  
        let btnBack= document.querySelector('button.back');

        function changeSide(e){
            if(document.body.clientWidth<=767){
                if(main.style.display=='none'){
                    aside.style.width= '0%';
                    main.style.display= 'block';
                    main.style.width= '100%';
                }else{
                    aside.style.width= '100%';
                    main.style.display= 'none';
                }
            }
        }

        for(let i=0; i<chatRooms.length; i++){
            chatRooms[i].addEventListener('click',changeSide);
        }
        btnBack.addEventListener('click',changeSide);

        window.addEventListener('resize',function(){
            //md
            if(document.body.clientWidth>=768 && document.body.clientWidth<=991){
                aside.style.width= 'calc(100% / 12 * 5)';
                main.style.display= 'block';
                main.style.width= 'calc(100% / 12 * 7)';

            //lg
            }else if(document.body.clientWidth>=992 && document.body.clientWidth<=1199){
                aside.style.width= 'calc(100% / 12 * 4)';
                main.style.display= 'block';
                main.style.width= 'calc(100% / 12 * 8)';

            //xl
            }else if(document.body.clientWidth>=1200){
                aside.style.width= 'calc(100% / 12 * 4)';
                main.style.display= 'block';
                main.style.width= 'calc(100% / 12 * 8)';

            //sm
            }else if(document.body.clientWidth>=576 && document.body.clientWidth<=767){
                aside.style.width= '100%';
                main.style.display= 'none';
                main.style.width= '100%';

            //ss
            }else if(document.body.clientWidth<=575){
                aside.style.width= '100%';
                main.style.display= 'none';
                main.style.width= '100%';
            }
        });


    </script>
</body>
</html>
